!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/js",n(n.s=0)}([function(e,t,n){"use strict";function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}n.r(t);var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pointlist=t.pointlist,this.pointItem=document.createElement("li"),this.removeKey=document.createElement("span"),this.itemClassName=t.itemClassName,this.text=t.text,this.needFunction=t.eventFunction,this.id=t.id}var t,n,r;return t=e,(n=[{key:"createItem",value:function(){var e=this;this.pointItem.classList.add(this.itemClassName),this.removeKey.classList.add(this.itemClassName+"_remove"),this.pointItem.textContent=this.text,this.pointItem.dataset.id=this.id,this.pointItem.append(this.removeKey),this.removeKey.addEventListener("mousedown",(function(t){t.stopPropagation(),e.pointItem.remove(),e.needFunction("remove")})),this.pointlist.append(this.pointItem),this.pointItem.addEventListener("mousedown",(function(t){return e._movetItem(t)}))}},{key:"_movetItem",value:function(e){var t=this,n=document.createElement("li");n.classList.add(this.itemClassName),n.style.border="none";var i=o(this.pointlist.querySelectorAll("."+this.itemClassName)).filter((function(e){return e.dataset.id!=t.pointItem.dataset.id})),r=this.pointlist.scrollHeight/(i.length+1),a=e.clientY-this.pointItem.getBoundingClientRect().top,s=this.pointlist.getBoundingClientRect().top+pageYOffset,l=function(e){var o,l=e.pageY-s-a;if(l>=0){var u=(o=l,Math.round(o/r)),c=i[u];t.pointItem.style.top=l+"px",c?c.before(n):i.length>0&&i[i.length-1].after(n)}};this.pointItem.style.position="absolute",this.pointItem.style.zIndex="999",l(e),window.addEventListener("mousemove",l),window.addEventListener("mouseup",(function(){t.pointItem.style.position="static",t.pointItem.style.zIndex="1",n.replaceWith(t.pointItem),n.remove(),window.removeEventListener("mousemove",l),t.needFunction("mouseup"),window.onmouseup=null}))}}])&&i(t.prototype,n),r&&i(t,r),e}();function a(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}window.onload=function(){var e;e="map",ymaps.ready((function(){var t,n,o,i,s,l=new ymaps.Map(e,{center:[54.32824,48.38657],zoom:12,controls:[]});t=l,n={listLength:0,coordinates:{},polyline:new ymaps.Polyline([])},o=document.querySelector("#addressLine"),i=document.querySelector(".pointlist"),s=function(){var e=a(i.querySelectorAll(".pointlist__point[data-id]")).map((function(e){return n.coordinates[e.dataset.id]}));t.geoObjects.remove(n.polyline);var o=new ymaps.Polyline(e);n.polyline=o,t.geoObjects.add(o)},o.addEventListener("keydown",(function(e){var a,l,u,c,d;13==e.keyCode&&(a=o.value,l=n.listLength,u=t.getCenter(),c=new ymaps.Placemark(u,{balloonContent:a},{draggable:!0,balloonPanelMaxMapArea:0}),d=new r({pointlist:i,itemClassName:"pointlist__point",text:a,id:l,eventFunction:function(e){switch(e){case"remove":t.geoObjects.remove(c),delete n.coordinates[l],s();break;case"mouseup":s()}}}),c.events.add("dragend",(function(){n.coordinates[l]=c.geometry.getCoordinates(),s()})),c.events.add("click",(function(){s()})),n.coordinates[l]=u,t.geoObjects.add(c),d.createItem(a,l),s(),o.value="",n.listLength++)}))}))}}]);